<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Contribuer une randonnée</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <nav>
    <a href="/">Randonner</a>
    <a href="/contribuer">Contribuer</a>
    <span id="user-info"></span>
  </nav>
  <h1>Contribuer une randonnée</h1>
  <form action="/contribuer" method="POST">
    <label for="nom">Nom :</label>
    <input type="text" id="nom" name="nom" required><br>
    <label for="description">Description :</label>
    <textarea id="description" name="description" required></textarea><br>
    <label for="adresse">Adresse :</label>
    <input type="text" id="adresse" name="adresse" required><br>
    <label for="popularite">Popularité initiale (1 à 5) :</label>
    <select id="popularite" name="popularite" required>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select><br>
    <label for="photo">URL de la photo :</label>
    <input type="text" id="photo" name="photo" required><br>
    <button type="submit">Soumettre</button>
  </form>

  <script>
    // Vérifier la session utilisateur
    fetch('/api/session')
      .then(response => response.json())
      .then(data => {
        const userInfo = document.getElementById('user-info');
        if (data.userIdentifiant) {
          userInfo.textContent = `Connecté en tant que: ${data.userIdentifiant}`;
        } else {
          window.location.href = '/connexion';
        }
      });
      
  </script>
</body>
</html>
